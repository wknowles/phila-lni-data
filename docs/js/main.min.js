function ready(t,e,n){var s={},i={};n.forEach(function(t){s[+t.censustract]=+t.count_censustract,i[+t.count_censustract]=+t.censustract});var r="#fff",a="#000",o=d3.scaleLinear().domain(d3.extent(n,function(t){return+t.count_censustract})).range([r,a]);svg.append("g").attr("class","map").selectAll("path").data(topojson.feature(e,e.objects.Census_Tracts_2010).features).enter().append("path").attr("d",path).attr("id",function(t){return s[t.properties.NAME10]}).style("fill",function(t){return void 0===s[d3.format(".0f")(t.properties.NAME10)]?"url(#smalldot)":o(s[d3.format(".0f")(t.properties.NAME10)])}).on("mouseover",function(t){tooltip.html("Census tract = "+d3.format(".0f")(t.properties.NAME10)+"<br> No. of licenses = "+s[d3.format(".0f")(t.properties.NAME10)]).style("left",d3.event.pageX-70+"px").style("top",d3.event.pageY+30+"px")}).on("mouseout",function(){d3.select(this).transition().duration(300).style("opacity",1),tooltip.transition().duration(300).style("opacity",1)}),svg.append("text").attr("x",width/2).attr("y",520).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Active rental licenses by census tract");var u=60,d=180,l=svg.append("g").attr("id","key").attr("class","key").attr("width",u).attr("height",d).attr("transform","translate(360, 280)"),h=l.append("defs").append("svg:linearGradient").attr("id","gradient").attr("x1","100%").attr("y1","0%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");h.append("stop").attr("offset","0%").attr("stop-color",a).attr("stop-opacity",1),h.append("stop").attr("offset","100%").attr("stop-color",r).attr("stop-opacity",1),l.append("rect").attr("width",u-40).attr("height",d-20).style("fill","url(#gradient)").attr("transform","translate(0,10)");var c=d3.scaleLinear().range([d-20,0]).domain(d3.extent(n,function(t){return+t.count_censustract})),f=d3.axisRight(c);l.append("g").attr("class","y axis").attr("transform","translate(24,10)").call(f).selectAll("text").style("text-anchor","end").attr("dx","2.5em").attr("dy","0em")}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return fs.apply(null,arguments)}function e(t){fs=t}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t){var e;for(e in t)return!1;return!0}function r(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function a(t,e){var n,s=[];for(n=0;n<t.length;++n)s.push(e(t[n],n));return s}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,s){return ye(t,e,n,s,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function h(t){return null==t._pf&&(t._pf=l()),t._pf}function c(t){if(null==t._isValid){var e=h(t),n=ms.call(e.parsedDateParts,function(t){return null!=t}),s=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(s=s&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return s;t._isValid=s}return t._isValid}function f(t){var e=d(NaN);return null!=t?u(h(e),t):h(e).userInvalidated=!0,e}function m(t){return void 0===t}function _(t,e){var n,s,i;if(m(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),m(e._i)||(t._i=e._i),m(e._f)||(t._f=e._f),m(e._l)||(t._l=e._l),m(e._strict)||(t._strict=e._strict),m(e._tzm)||(t._tzm=e._tzm),m(e._isUTC)||(t._isUTC=e._isUTC),m(e._offset)||(t._offset=e._offset),m(e._pf)||(t._pf=h(e)),m(e._locale)||(t._locale=e._locale),_s.length>0)for(n in _s)s=_s[n],i=e[s],m(i)||(t[s]=i);return t}function y(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),ys===!1&&(ys=!0,t.updateOffset(this),ys=!1)}function g(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function p(t){return 0>t?Math.ceil(t)||0:Math.floor(t)}function v(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=p(e)),n}function w(t,e,n){var s,i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(s=0;i>s;s++)(n&&t[s]!==e[s]||!n&&v(t[s])!==v(e[s]))&&a++;return a+r}function M(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,n){var s=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),s){for(var i,r=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var o in arguments[0])i+=o+": "+arguments[0][o]+", ";i=i.slice(0,-2)}else i=arguments[a];r.push(i)}M(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),s=!1}return n.apply(this,arguments)},n)}function S(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),gs[e]||(M(n),gs[e]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function Y(t){var e,n;for(n in t)e=t[n],D(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function x(t,e){var n,i=u({},t);for(n in e)o(e,n)&&(s(t[n])&&s(e[n])?(i[n]={},u(i[n],t[n]),u(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)o(t,n)&&!o(e,n)&&s(t[n])&&(i[n]=u({},i[n]));return i}function O(t){null!=t&&this.set(t)}function b(t,e,n){var s=this._calendar[t]||this._calendar.sameElse;return D(s)?s.call(e,n):s}function T(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function P(){return this._invalidDate}function W(t){return this._ordinal.replace("%d",t)}function R(t,e,n,s){var i=this._relativeTime[n];return D(i)?i(t,e,n,s):i.replace(/%d/i,t)}function C(t,e){var n=this._relativeTime[t>0?"future":"past"];return D(n)?n(e):n.replace(/%s/i,e)}function L(t,e){var n=t.toLowerCase();xs[n]=xs[n+"s"]=xs[e]=t}function U(t){return"string"==typeof t?xs[t]||xs[t.toLowerCase()]:void 0}function F(t){var e,n,s={};for(n in t)o(t,n)&&(e=U(n),e&&(s[e]=t[n]));return s}function H(t,e){Os[t]=e}function G(t){var e=[];for(var n in t)e.push({unit:n,priority:Os[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function A(e,n){return function(s){return null!=s?(V(this,e,s),t.updateOffset(this,n),this):j(this,e)}}function j(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function V(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function E(t){return t=U(t),D(this[t])?this[t]():this}function N(t,e){if("object"==typeof t){t=F(t);for(var n=G(t),s=0;s<n.length;s++)this[n[s].unit](t[n[s].unit])}else if(t=U(t),D(this[t]))return this[t](e);return this}function I(t,e,n){var s=""+Math.abs(t),i=e-s.length,r=t>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}function z(t,e,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),t&&(Ws[t]=i),e&&(Ws[e[0]]=function(){return I(i.apply(this,arguments),e[1],e[2])}),n&&(Ws[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function Z(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $(t){var e,n,s=t.match(bs);for(e=0,n=s.length;n>e;e++)Ws[s[e]]?s[e]=Ws[s[e]]:s[e]=Z(s[e]);return function(e){var i,r="";for(i=0;n>i;i++)r+=s[i]instanceof Function?s[i].call(e,t):s[i];return r}}function B(t,e){return t.isValid()?(e=q(e,t.localeData()),Ps[e]=Ps[e]||$(e),Ps[e](t)):t.localeData().invalidDate()}function q(t,e){function n(t){return e.longDateFormat(t)||t}var s=5;for(Ts.lastIndex=0;s>=0&&Ts.test(t);)t=t.replace(Ts,n),Ts.lastIndex=0,s-=1;return t}function J(t,e,n){qs[t]=D(e)?e:function(t,s){return t&&n?n:e}}function K(t,e){return o(qs,t)?qs[t](e._strict,e._locale):new RegExp(Q(t))}function Q(t){return X(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,s,i){return e||n||s||i}))}function X(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tt(t,e){var n,s=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(s=function(t,n){n[e]=v(t)}),n=0;n<t.length;n++)Js[t[n]]=s}function et(t,e){tt(t,function(t,n,s,i){s._w=s._w||{},e(t,s._w,s,i)})}function nt(t,e,n){null!=e&&o(Js,t)&&Js[t](e,n._a,n,t)}function st(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function it(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ai).test(e)?"format":"standalone"][t.month()]:this._months}function rt(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ai.test(e)?"format":"standalone"][t.month()]:this._monthsShort}function at(t,e,n){var s,i,r,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;12>s;++s)r=d([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===e?(i=vs.call(this._shortMonthsParse,a),-1!==i?i:null):(i=vs.call(this._longMonthsParse,a),-1!==i?i:null):"MMM"===e?(i=vs.call(this._shortMonthsParse,a),-1!==i?i:(i=vs.call(this._longMonthsParse,a),-1!==i?i:null)):(i=vs.call(this._longMonthsParse,a),-1!==i?i:(i=vs.call(this._shortMonthsParse,a),-1!==i?i:null))}function ot(t,e,n){var s,i,r;if(this._monthsParseExact)return at.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;12>s;s++){if(i=d([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[s].test(t))return s;if(n&&"MMM"===e&&this._shortMonthsParse[s].test(t))return s;if(!n&&this._monthsParse[s].test(t))return s}}function ut(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=v(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),st(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function dt(e){return null!=e?(ut(this,e),t.updateOffset(this,!0),this):j(this,"Month")}function lt(){return st(this.year(),this.month())}function ht(t){return this._monthsParseExact?(o(this,"_monthsRegex")||ft.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=di),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ct(t){return this._monthsParseExact?(o(this,"_monthsRegex")||ft.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=li),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ft(){function t(t,e){return e.length-t.length}var e,n,s=[],i=[],r=[];for(e=0;12>e;e++)n=d([2e3,e]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(t),i.sort(t),r.sort(t),e=0;12>e;e++)s[e]=X(s[e]),i[e]=X(i[e]);for(e=0;24>e;e++)r[e]=X(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function mt(t){return _t(t)?366:365}function _t(t){return t%4===0&&t%100!==0||t%400===0}function yt(){return _t(this.year())}function gt(t,e,n,s,i,r,a){var o=new Date(t,e,n,s,i,r,a);return 100>t&&t>=0&&isFinite(o.getFullYear())&&o.setFullYear(t),o}function pt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function vt(t,e,n){var s=7+e-n,i=(7+pt(t,0,s).getUTCDay()-e)%7;return-i+s-1}function wt(t,e,n,s,i){var r,a,o=(7+n-s)%7,u=vt(t,s,i),d=1+7*(e-1)+o+u;return 0>=d?(r=t-1,a=mt(r)+d):d>mt(t)?(r=t+1,a=d-mt(t)):(r=t,a=d),{year:r,dayOfYear:a}}function Mt(t,e,n){var s,i,r=vt(t.year(),e,n),a=Math.floor((t.dayOfYear()-r-1)/7)+1;return 1>a?(i=t.year()-1,s=a+kt(i,e,n)):a>kt(t.year(),e,n)?(s=a-kt(t.year(),e,n),i=t.year()+1):(i=t.year(),s=a),{week:s,year:i}}function kt(t,e,n){var s=vt(t,e,n),i=vt(t+1,e,n);return(mt(t)-s+i)/7}function St(t){return Mt(t,this._week.dow,this._week.doy).week}function Dt(){return this._week.dow}function Yt(){return this._week.doy}function xt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ot(t){var e=Mt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function bt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Tt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Pt(t,e){return t?n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays}function Wt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Rt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ct(t,e,n){var s,i,r,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;7>s;++s)r=d([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===e?(i=vs.call(this._weekdaysParse,a),-1!==i?i:null):"ddd"===e?(i=vs.call(this._shortWeekdaysParse,a),-1!==i?i:null):(i=vs.call(this._minWeekdaysParse,a),-1!==i?i:null):"dddd"===e?(i=vs.call(this._weekdaysParse,a),-1!==i?i:(i=vs.call(this._shortWeekdaysParse,a),-1!==i?i:(i=vs.call(this._minWeekdaysParse,a),-1!==i?i:null))):"ddd"===e?(i=vs.call(this._shortWeekdaysParse,a),-1!==i?i:(i=vs.call(this._weekdaysParse,a),-1!==i?i:(i=vs.call(this._minWeekdaysParse,a),-1!==i?i:null))):(i=vs.call(this._minWeekdaysParse,a),-1!==i?i:(i=vs.call(this._weekdaysParse,a),-1!==i?i:(i=vs.call(this._shortWeekdaysParse,a),-1!==i?i:null)))}function Lt(t,e,n){var s,i,r;if(this._weekdaysParseExact)return Ct.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;7>s;s++){if(i=d([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[s].test(t))return s;if(n&&"ddd"===e&&this._shortWeekdaysParse[s].test(t))return s;if(n&&"dd"===e&&this._minWeekdaysParse[s].test(t))return s;if(!n&&this._weekdaysParse[s].test(t))return s}}function Ut(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=bt(t,this.localeData()),this.add(t-e,"d")):e}function Ft(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ht(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Tt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Gt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=yi),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function At(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=gi),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function jt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pi),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Vt(){function t(t,e){return e.length-t.length}var e,n,s,i,r,a=[],o=[],u=[],l=[];for(e=0;7>e;e++)n=d([2e3,1]).day(e),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);for(a.sort(t),o.sort(t),u.sort(t),l.sort(t),e=0;7>e;e++)o[e]=X(o[e]),u[e]=X(u[e]),l[e]=X(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Et(){return this.hours()%12||12}function Nt(){return this.hours()||24}function It(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function zt(t,e){return e._meridiemParse}function Zt(t){return"p"===(t+"").toLowerCase().charAt(0)}function $t(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Bt(t){return t?t.toLowerCase().replace("_","-"):t}function qt(t){for(var e,n,s,i,r=0;r<t.length;){for(i=Bt(t[r]).split("-"),e=i.length,n=Bt(t[r+1]),n=n?n.split("-"):null;e>0;){if(s=Jt(i.slice(0,e).join("-")))return s;if(n&&n.length>=e&&w(i,n,!0)>=e-1)break;e--}r++}return null}function Jt(t){var e=null;if(!Si[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=vi._abbr,require("./locale/"+t),Kt(e)}catch(n){}return Si[t]}function Kt(t,e){var n;return t&&(n=m(e)?te(t):Qt(t,e),n&&(vi=n)),vi._abbr}function Qt(t,e){if(null!==e){var n=ki;return e.abbr=t,null!=Si[t]?(S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Si[t]._config):null!=e.parentLocale&&(null!=Si[e.parentLocale]?n=Si[e.parentLocale]._config:S("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Si[t]=new O(x(n,e)),Kt(t),Si[t]}return delete Si[t],null}function Xt(t,e){if(null!=e){var n,s=ki;null!=Si[t]&&(s=Si[t]._config),e=x(s,e),n=new O(e),n.parentLocale=Si[t],Si[t]=n,Kt(t)}else null!=Si[t]&&(null!=Si[t].parentLocale?Si[t]=Si[t].parentLocale:null!=Si[t]&&delete Si[t]);return Si[t]}function te(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return vi;if(!n(t)){if(e=Jt(t))return e;t=[t]}return qt(t)}function ee(){return ps(Si)}function ne(t){var e,n=t._a;return n&&-2===h(t).overflow&&(e=n[Qs]<0||n[Qs]>11?Qs:n[Xs]<1||n[Xs]>st(n[Ks],n[Qs])?Xs:n[ti]<0||n[ti]>24||24===n[ti]&&(0!==n[ei]||0!==n[ni]||0!==n[si])?ti:n[ei]<0||n[ei]>59?ei:n[ni]<0||n[ni]>59?ni:n[si]<0||n[si]>999?si:-1,h(t)._overflowDayOfYear&&(Ks>e||e>Xs)&&(e=Xs),h(t)._overflowWeeks&&-1===e&&(e=ii),h(t)._overflowWeekday&&-1===e&&(e=ri),h(t).overflow=e),t}function se(t){var e,n,s,i,r,a,o=t._i,u=Di.exec(o)||Yi.exec(o);if(u){for(h(t).iso=!0,e=0,n=Oi.length;n>e;e++)if(Oi[e][1].exec(u[1])){i=Oi[e][0],s=Oi[e][2]!==!1;break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=bi.length;n>e;e++)if(bi[e][1].exec(u[3])){r=(u[2]||" ")+bi[e][0];break}if(null==r)return void(t._isValid=!1)}if(!s&&null!=r)return void(t._isValid=!1);if(u[4]){if(!xi.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=i+(r||"")+(a||""),de(t)}else t._isValid=!1}function ie(e){var n=Ti.exec(e._i);return null!==n?void(e._d=new Date((+n[1]))):(se(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function re(t,e,n){return null!=t?t:null!=e?e:n}function ae(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function oe(t){var e,n,s,i,r=[];if(!t._d){for(s=ae(t),t._w&&null==t._a[Xs]&&null==t._a[Qs]&&ue(t),t._dayOfYear&&(i=re(t._a[Ks],s[Ks]),t._dayOfYear>mt(i)&&(h(t)._overflowDayOfYear=!0),n=pt(i,0,t._dayOfYear),t._a[Qs]=n.getUTCMonth(),t._a[Xs]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=s[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ti]&&0===t._a[ei]&&0===t._a[ni]&&0===t._a[si]&&(t._nextDay=!0,t._a[ti]=0),t._d=(t._useUTC?pt:gt).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ti]=24)}}function ue(t){var e,n,s,i,r,a,o,u;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,a=4,n=re(e.GG,t._a[Ks],Mt(ge(),1,4).year),s=re(e.W,1),i=re(e.E,1),(1>i||i>7)&&(u=!0)):(r=t._locale._week.dow,a=t._locale._week.doy,n=re(e.gg,t._a[Ks],Mt(ge(),r,a).year),s=re(e.w,1),null!=e.d?(i=e.d,(0>i||i>6)&&(u=!0)):null!=e.e?(i=e.e+r,(e.e<0||e.e>6)&&(u=!0)):i=r),1>s||s>kt(n,r,a)?h(t)._overflowWeeks=!0:null!=u?h(t)._overflowWeekday=!0:(o=wt(n,s,i,r,a),t._a[Ks]=o.year,t._dayOfYear=o.dayOfYear)}function de(e){if(e._f===t.ISO_8601)return void se(e);e._a=[],h(e).empty=!0;var n,s,i,r,a,o=""+e._i,u=o.length,d=0;for(i=q(e._f,e._locale).match(bs)||[],n=0;n<i.length;n++)r=i[n],s=(o.match(K(r,e))||[])[0],s&&(a=o.substr(0,o.indexOf(s)),a.length>0&&h(e).unusedInput.push(a),o=o.slice(o.indexOf(s)+s.length),d+=s.length),Ws[r]?(s?h(e).empty=!1:h(e).unusedTokens.push(r),nt(r,s,e)):e._strict&&!s&&h(e).unusedTokens.push(r);h(e).charsLeftOver=u-d,o.length>0&&h(e).unusedInput.push(o),e._a[ti]<=12&&h(e).bigHour===!0&&e._a[ti]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[ti]=le(e._locale,e._a[ti],e._meridiem),oe(e),ne(e)}function le(t,e,n){var s;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(s=t.isPM(n),s&&12>e&&(e+=12),s||12!==e||(e=0),e):e}function he(t){var e,n,s,i,r;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)r=0,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],de(e),c(e)&&(r+=h(e).charsLeftOver,r+=10*h(e).unusedTokens.length,h(e).score=r,(null==s||s>r)&&(s=r,n=e));u(t,n||e)}function ce(t){if(!t._d){var e=F(t._i);t._a=a([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),oe(t)}}function fe(t){var e=new y(ne(me(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function me(t){var e=t._i,s=t._f;return t._locale=t._locale||te(t._l),null===e||void 0===s&&""===e?f({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new y(ne(e)):(n(s)?he(t):r(e)?t._d=e:s?de(t):_e(t),c(t)||(t._d=null),t))}function _e(e){var s=e._i;void 0===s?e._d=new Date(t.now()):r(s)?e._d=new Date(s.valueOf()):"string"==typeof s?ie(e):n(s)?(e._a=a(s.slice(0),function(t){return parseInt(t,10)}),oe(e)):"object"==typeof s?ce(e):"number"==typeof s?e._d=new Date(s):t.createFromInputFallback(e)}function ye(t,e,r,a,o){var u={};return"boolean"==typeof r&&(a=r,r=void 0),(s(t)&&i(t)||n(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=o,u._l=r,u._i=t,u._f=e,u._strict=a,fe(u)}function ge(t,e,n,s){return ye(t,e,n,s,!1)}function pe(t,e){var s,i;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return ge();for(s=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](s)||(s=e[i]);return s}function ve(){var t=[].slice.call(arguments,0);return pe("isBefore",t)}function we(){var t=[].slice.call(arguments,0);return pe("isAfter",t)}function Me(t){var e=F(t),n=e.year||0,s=e.quarter||0,i=e.month||0,r=e.week||0,a=e.day||0,o=e.hour||0,u=e.minute||0,d=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*d+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=te(),this._bubble()}function ke(t){return t instanceof Me}function Se(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function De(t,e){z(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)})}function Ye(t,e){var n=(e||"").match(t)||[],s=n[n.length-1]||[],i=(s+"").match(Ci)||["-",0,0],r=+(60*i[1])+v(i[2]);return"+"===i[0]?r:-r}function xe(e,n){var s,i;return n._isUTC?(s=n.clone(),i=(g(e)||r(e)?e.valueOf():ge(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),t.updateOffset(s,!1),s):ge(e).local()}function Oe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function be(e,n){var s,i=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Ye(Zs,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(s=Oe(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!n||this._changeInProgress?Ie(this,Ae(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Oe(this):null!=e?this:NaN}function Te(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Pe(t){return this.utcOffset(0,t)}function We(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Oe(this),"m")),this}function Re(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=Ye(zs,this._i);0===t?this.utcOffset(0,!0):this.utcOffset(Ye(zs,this._i))}return this}function Ce(t){return!!this.isValid()&&(t=t?ge(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Le(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ue(){if(!m(this._isDSTShifted))return this._isDSTShifted;var t={};if(_(t,this),t=me(t),t._a){var e=t._isUTC?d(t._a):ge(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Fe(){return!!this.isValid()&&!this._isUTC}function He(){return!!this.isValid()&&this._isUTC}function Ge(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ae(t,e){var n,s,i,r=t,a=null;return ke(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(a=Li.exec(t))?(n="-"===a[1]?-1:1,r={y:0,d:v(a[Xs])*n,h:v(a[ti])*n,m:v(a[ei])*n,s:v(a[ni])*n,ms:v(Se(1e3*a[si]))*n}):(a=Ui.exec(t))?(n="-"===a[1]?-1:1,r={y:je(a[2],n),M:je(a[3],n),w:je(a[4],n),d:je(a[5],n),h:je(a[6],n),m:je(a[7],n),s:je(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=Ee(ge(r.from),ge(r.to)),r={},r.ms=i.milliseconds,r.M=i.months),s=new Me(r),ke(t)&&o(t,"_locale")&&(s._locale=t._locale),s}function je(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ve(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ee(t,e){var n;return t.isValid()&&e.isValid()?(e=xe(e,t),t.isBefore(e)?n=Ve(t,e):(n=Ve(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ne(t,e){return function(n,s){var i,r;return null===s||isNaN(+s)||(S(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=s,s=r),n="string"==typeof n?+n:n,i=Ae(n,s),Ie(this,i,t),this}}function Ie(e,n,s,i){var r=n._milliseconds,a=Se(n._days),o=Se(n._months);e.isValid()&&(i=null==i||i,r&&e._d.setTime(e._d.valueOf()+r*s),a&&V(e,"Date",j(e,"Date")+a*s),o&&ut(e,j(e,"Month")+o*s),i&&t.updateOffset(e,a||o))}function ze(t,e){var n=t.diff(e,"days",!0);return-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse"}function Ze(e,n){var s=e||ge(),i=xe(s,this).startOf("day"),r=t.calendarFormat(this,i)||"sameElse",a=n&&(D(n[r])?n[r].call(this,s):n[r]);return this.format(a||this.localeData().calendar(r,this,ge(s)))}function $e(){return new y(this)}function Be(t,e){var n=g(t)?t:ge(t);return!(!this.isValid()||!n.isValid())&&(e=U(m(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function qe(t,e){var n=g(t)?t:ge(t);return!(!this.isValid()||!n.isValid())&&(e=U(m(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Je(t,e,n,s){return s=s||"()",("("===s[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===s[1]?this.isBefore(e,n):!this.isAfter(e,n))}function Ke(t,e){var n,s=g(t)?t:ge(t);return!(!this.isValid()||!s.isValid())&&(e=U(e||"millisecond"),"millisecond"===e?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Qe(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Xe(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function tn(t,e,n){var s,i,r,a;return this.isValid()?(s=xe(t,this),s.isValid()?(i=6e4*(s.utcOffset()-this.utcOffset()),e=U(e),"year"===e||"month"===e||"quarter"===e?(a=en(this,s),"quarter"===e?a/=3:"year"===e&&(a/=12)):(r=this-s,a="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-i)/864e5:"week"===e?(r-i)/6048e5:r),n?a:p(a)):NaN):NaN}function en(t,e){var n,s,i=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(i,"months");return 0>e-r?(n=t.clone().add(i-1,"months"),s=(e-r)/(r-n)):(n=t.clone().add(i+1,"months"),s=(e-r)/(n-r)),-(i+s)||0}function nn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sn(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():B(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function rn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=B(this,e);return this.localeData().postformat(n)}function an(t,e){return this.isValid()&&(g(t)&&t.isValid()||ge(t).isValid())?Ae({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function on(t){return this.from(ge(),t)}function un(t,e){return this.isValid()&&(g(t)&&t.isValid()||ge(t).isValid())?Ae({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function dn(t){return this.to(ge(),t)}function ln(t){var e;return void 0===t?this._locale._abbr:(e=te(t),null!=e&&(this._locale=e),this)}function hn(){return this._locale}function cn(t){switch(t=U(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function fn(t){return t=U(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function mn(){return this._d.valueOf()-6e4*(this._offset||0)}function _n(){return Math.floor(this.valueOf()/1e3)}function yn(){return new Date(this.valueOf())}function gn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function pn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function vn(){return this.isValid()?this.toISOString():null}function wn(){
return c(this)}function Mn(){return u({},h(this))}function kn(){return h(this).overflow}function Sn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Dn(t,e){z(0,[t,t.length],0,e)}function Yn(t){return Tn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function xn(t){return Tn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function On(){return kt(this.year(),1,4)}function bn(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function Tn(t,e,n,s,i){var r;return null==t?Mt(this,s,i).year:(r=kt(t,s,i),e>r&&(e=r),Pn.call(this,t,e,n,s,i))}function Pn(t,e,n,s,i){var r=wt(t,e,n,s,i),a=pt(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Wn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Rn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Cn(t,e){e[si]=v(1e3*("0."+t))}function Ln(){return this._isUTC?"UTC":""}function Un(){return this._isUTC?"Coordinated Universal Time":""}function Fn(t){return ge(1e3*t)}function Hn(){return ge.apply(null,arguments).parseZone()}function Gn(t){return t}function An(t,e,n,s){var i=te(),r=d().set(s,e);return i[n](r,t)}function jn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return An(t,e,n,"month");var s,i=[];for(s=0;12>s;s++)i[s]=An(t,s,n,"month");return i}function Vn(t,e,n,s){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var i=te(),r=t?i._week.dow:0;if(null!=n)return An(e,(n+r)%7,s,"day");var a,o=[];for(a=0;7>a;a++)o[a]=An(e,(a+r)%7,s,"day");return o}function En(t,e){return jn(t,e,"months")}function Nn(t,e){return jn(t,e,"monthsShort")}function In(t,e,n){return Vn(t,e,n,"weekdays")}function zn(t,e,n){return Vn(t,e,n,"weekdaysShort")}function Zn(t,e,n){return Vn(t,e,n,"weekdaysMin")}function $n(){var t=this._data;return this._milliseconds=$i(this._milliseconds),this._days=$i(this._days),this._months=$i(this._months),t.milliseconds=$i(t.milliseconds),t.seconds=$i(t.seconds),t.minutes=$i(t.minutes),t.hours=$i(t.hours),t.months=$i(t.months),t.years=$i(t.years),this}function Bn(t,e,n,s){var i=Ae(e,n);return t._milliseconds+=s*i._milliseconds,t._days+=s*i._days,t._months+=s*i._months,t._bubble()}function qn(t,e){return Bn(this,t,e,1)}function Jn(t,e){return Bn(this,t,e,-1)}function Kn(t){return 0>t?Math.floor(t):Math.ceil(t)}function Qn(){var t,e,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return r>=0&&a>=0&&o>=0||0>=r&&0>=a&&0>=o||(r+=864e5*Kn(ts(o)+a),a=0,o=0),u.milliseconds=r%1e3,t=p(r/1e3),u.seconds=t%60,e=p(t/60),u.minutes=e%60,n=p(e/60),u.hours=n%24,a+=p(n/24),i=p(Xn(a)),o+=i,a-=Kn(ts(i)),s=p(o/12),o%=12,u.days=a,u.months=o,u.years=s,this}function Xn(t){return 4800*t/146097}function ts(t){return 146097*t/4800}function es(t){var e,n,s=this._milliseconds;if(t=U(t),"month"===t||"year"===t)return e=this._days+s/864e5,n=this._months+Xn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(ts(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return 24*e+s/36e5;case"minute":return 1440*e+s/6e4;case"second":return 86400*e+s/1e3;case"millisecond":return Math.floor(864e5*e)+s;default:throw new Error("Unknown unit "+t)}}function ns(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function ss(t){return function(){return this.as(t)}}function is(t){return t=U(t),this[t+"s"]()}function rs(t){return function(){return this._data[t]}}function as(){return p(this.days()/7)}function os(t,e,n,s,i){return i.relativeTime(e||1,!!n,t,s)}function us(t,e,n){var s=Ae(t).abs(),i=dr(s.as("s")),r=dr(s.as("m")),a=dr(s.as("h")),o=dr(s.as("d")),u=dr(s.as("M")),d=dr(s.as("y")),l=i<lr.s&&["s",i]||1>=r&&["m"]||r<lr.m&&["mm",r]||1>=a&&["h"]||a<lr.h&&["hh",a]||1>=o&&["d"]||o<lr.d&&["dd",o]||1>=u&&["M"]||u<lr.M&&["MM",u]||1>=d&&["y"]||["yy",d];return l[2]=e,l[3]=+t>0,l[4]=n,os.apply(null,l)}function ds(t){return void 0===t?dr:"function"==typeof t&&(dr=t,!0)}function ls(t,e){return void 0!==lr[t]&&(void 0===e?lr[t]:(lr[t]=e,!0))}function hs(t){var e=this.localeData(),n=us(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function cs(){var t,e,n,s=hr(this._milliseconds)/1e3,i=hr(this._days),r=hr(this._months);t=p(s/60),e=p(t/60),s%=60,t%=60,n=p(r/12),r%=12;var a=n,o=r,u=i,d=e,l=t,h=s,c=this.asSeconds();return c?(0>c?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(u?u+"D":"")+(d||l||h?"T":"")+(d?d+"H":"")+(l?l+"M":"")+(h?h+"S":""):"P0D"}var fs,ms;ms=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,s=0;n>s;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};var _s=t.momentProperties=[],ys=!1,gs={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var ps;ps=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)o(t,e)&&n.push(e);return n};var vs,ws={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ms={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ks="Invalid date",Ss="%d",Ds=/\d{1,2}/,Ys={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},xs={},Os={},bs=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ts=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ps={},Ws={},Rs=/\d/,Cs=/\d\d/,Ls=/\d{3}/,Us=/\d{4}/,Fs=/[+-]?\d{6}/,Hs=/\d\d?/,Gs=/\d\d\d\d?/,As=/\d\d\d\d\d\d?/,js=/\d{1,3}/,Vs=/\d{1,4}/,Es=/[+-]?\d{1,6}/,Ns=/\d+/,Is=/[+-]?\d+/,zs=/Z|[+-]\d\d:?\d\d/gi,Zs=/Z|[+-]\d\d(?::?\d\d)?/gi,$s=/[+-]?\d+(\.\d{1,3})?/,Bs=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qs={},Js={},Ks=0,Qs=1,Xs=2,ti=3,ei=4,ni=5,si=6,ii=7,ri=8;vs=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),L("month","M"),H("month",8),J("M",Hs),J("MM",Hs,Cs),J("MMM",function(t,e){return e.monthsShortRegex(t)}),J("MMMM",function(t,e){return e.monthsRegex(t)}),tt(["M","MM"],function(t,e){e[Qs]=v(t)-1}),tt(["MMM","MMMM"],function(t,e,n,s){var i=n._locale.monthsParse(t,s,n._strict);null!=i?e[Qs]=i:h(n).invalidMonth=t});var ai=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,oi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ui="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),di=Bs,li=Bs;z("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),L("year","y"),H("year",1),J("Y",Is),J("YY",Hs,Cs),J("YYYY",Vs,Us),J("YYYYY",Es,Fs),J("YYYYYY",Es,Fs),tt(["YYYYY","YYYYYY"],Ks),tt("YYYY",function(e,n){n[Ks]=2===e.length?t.parseTwoDigitYear(e):v(e)}),tt("YY",function(e,n){n[Ks]=t.parseTwoDigitYear(e)}),tt("Y",function(t,e){e[Ks]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var hi=A("FullYear",!0);z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),H("week",5),H("isoWeek",5),J("w",Hs),J("ww",Hs,Cs),J("W",Hs),J("WW",Hs,Cs),et(["w","ww","W","WW"],function(t,e,n,s){e[s.substr(0,1)]=v(t)});var ci={dow:0,doy:6};z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),J("d",Hs),J("e",Hs),J("E",Hs),J("dd",function(t,e){return e.weekdaysMinRegex(t)}),J("ddd",function(t,e){return e.weekdaysShortRegex(t)}),J("dddd",function(t,e){return e.weekdaysRegex(t)}),et(["dd","ddd","dddd"],function(t,e,n,s){var i=n._locale.weekdaysParse(t,s,n._strict);null!=i?e.d=i:h(n).invalidWeekday=t}),et(["d","e","E"],function(t,e,n,s){e[s]=v(t)});var fi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),mi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_i="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),yi=Bs,gi=Bs,pi=Bs;z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Et),z("k",["kk",2],0,Nt),z("hmm",0,0,function(){return""+Et.apply(this)+I(this.minutes(),2)}),z("hmmss",0,0,function(){return""+Et.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),It("a",!0),It("A",!1),L("hour","h"),H("hour",13),J("a",zt),J("A",zt),J("H",Hs),J("h",Hs),J("HH",Hs,Cs),J("hh",Hs,Cs),J("hmm",Gs),J("hmmss",As),J("Hmm",Gs),J("Hmmss",As),tt(["H","HH"],ti),tt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),tt(["h","hh"],function(t,e,n){e[ti]=v(t),h(n).bigHour=!0}),tt("hmm",function(t,e,n){var s=t.length-2;e[ti]=v(t.substr(0,s)),e[ei]=v(t.substr(s)),h(n).bigHour=!0}),tt("hmmss",function(t,e,n){var s=t.length-4,i=t.length-2;e[ti]=v(t.substr(0,s)),e[ei]=v(t.substr(s,2)),e[ni]=v(t.substr(i)),h(n).bigHour=!0}),tt("Hmm",function(t,e,n){var s=t.length-2;e[ti]=v(t.substr(0,s)),e[ei]=v(t.substr(s))}),tt("Hmmss",function(t,e,n){var s=t.length-4,i=t.length-2;e[ti]=v(t.substr(0,s)),e[ei]=v(t.substr(s,2)),e[ni]=v(t.substr(i))});var vi,wi=/[ap]\.?m?\.?/i,Mi=A("Hours",!0),ki={calendar:ws,longDateFormat:Ms,invalidDate:ks,ordinal:Ss,ordinalParse:Ds,relativeTime:Ys,months:oi,monthsShort:ui,week:ci,weekdays:fi,weekdaysMin:_i,weekdaysShort:mi,meridiemParse:wi},Si={},Di=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Yi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,xi=/Z|[+-]\d\d(?::?\d\d)?/,Oi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ti=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=k("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Pi=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:f()}),Wi=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()}),Ri=function(){return Date.now?Date.now():+new Date};De("Z",":"),De("ZZ",""),J("Z",Zs),J("ZZ",Zs),tt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ye(Zs,t)});var Ci=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Li=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ui=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ae.fn=Me.prototype;var Fi=Ne(1,"add"),Hi=Ne(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Gi=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Dn("gggg","weekYear"),Dn("ggggg","weekYear"),Dn("GGGG","isoWeekYear"),Dn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),J("G",Is),J("g",Is),J("GG",Hs,Cs),J("gg",Hs,Cs),J("GGGG",Vs,Us),J("gggg",Vs,Us),J("GGGGG",Es,Fs),J("ggggg",Es,Fs),et(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,s){e[s.substr(0,2)]=v(t)}),et(["gg","GG"],function(e,n,s,i){n[i]=t.parseTwoDigitYear(e)}),z("Q",0,"Qo","quarter"),L("quarter","Q"),H("quarter",7),J("Q",Rs),tt("Q",function(t,e){e[Qs]=3*(v(t)-1)}),z("D",["DD",2],"Do","date"),L("date","D"),H("date",9),J("D",Hs),J("DD",Hs,Cs),J("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),tt(["D","DD"],Xs),tt("Do",function(t,e){e[Xs]=v(t.match(Hs)[0],10)});var Ai=A("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),H("dayOfYear",4),J("DDD",js),J("DDDD",Ls),tt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=v(t)}),z("m",["mm",2],0,"minute"),L("minute","m"),H("minute",14),J("m",Hs),J("mm",Hs,Cs),tt(["m","mm"],ei);var ji=A("Minutes",!1);z("s",["ss",2],0,"second"),L("second","s"),H("second",15),J("s",Hs),J("ss",Hs,Cs),tt(["s","ss"],ni);var Vi=A("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),H("millisecond",16),J("S",js,Rs),J("SS",js,Cs),J("SSS",js,Ls);var Ei;for(Ei="SSSS";Ei.length<=9;Ei+="S")J(Ei,Ns);for(Ei="S";Ei.length<=9;Ei+="S")tt(Ei,Cn);var Ni=A("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var Ii=y.prototype;Ii.add=Fi,Ii.calendar=Ze,Ii.clone=$e,Ii.diff=tn,Ii.endOf=fn,Ii.format=rn,Ii.from=an,Ii.fromNow=on,Ii.to=un,Ii.toNow=dn,Ii.get=E,Ii.invalidAt=kn,Ii.isAfter=Be,Ii.isBefore=qe,Ii.isBetween=Je,Ii.isSame=Ke,Ii.isSameOrAfter=Qe,Ii.isSameOrBefore=Xe,Ii.isValid=wn,Ii.lang=Gi,Ii.locale=ln,Ii.localeData=hn,Ii.max=Wi,Ii.min=Pi,Ii.parsingFlags=Mn,Ii.set=N,Ii.startOf=cn,Ii.subtract=Hi,Ii.toArray=gn,Ii.toObject=pn,Ii.toDate=yn,Ii.toISOString=sn,Ii.toJSON=vn,Ii.toString=nn,Ii.unix=_n,Ii.valueOf=mn,Ii.creationData=Sn,Ii.year=hi,Ii.isLeapYear=yt,Ii.weekYear=Yn,Ii.isoWeekYear=xn,Ii.quarter=Ii.quarters=Wn,Ii.month=dt,Ii.daysInMonth=lt,Ii.week=Ii.weeks=xt,Ii.isoWeek=Ii.isoWeeks=Ot,Ii.weeksInYear=bn,Ii.isoWeeksInYear=On,Ii.date=Ai,Ii.day=Ii.days=Ut,Ii.weekday=Ft,Ii.isoWeekday=Ht,Ii.dayOfYear=Rn,Ii.hour=Ii.hours=Mi,Ii.minute=Ii.minutes=ji,Ii.second=Ii.seconds=Vi,Ii.millisecond=Ii.milliseconds=Ni,Ii.utcOffset=be,Ii.utc=Pe,Ii.local=We,Ii.parseZone=Re,Ii.hasAlignedHourOffset=Ce,Ii.isDST=Le,Ii.isLocal=Fe,Ii.isUtcOffset=He,Ii.isUtc=Ge,Ii.isUTC=Ge,Ii.zoneAbbr=Ln,Ii.zoneName=Un,Ii.dates=k("dates accessor is deprecated. Use date instead.",Ai),Ii.months=k("months accessor is deprecated. Use month instead",dt),Ii.years=k("years accessor is deprecated. Use year instead",hi),Ii.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Te),Ii.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ue);var zi=Ii,Zi=O.prototype;Zi.calendar=b,Zi.longDateFormat=T,Zi.invalidDate=P,Zi.ordinal=W,Zi.preparse=Gn,Zi.postformat=Gn,Zi.relativeTime=R,Zi.pastFuture=C,Zi.set=Y,Zi.months=it,Zi.monthsShort=rt,Zi.monthsParse=ot,Zi.monthsRegex=ct,Zi.monthsShortRegex=ht,Zi.week=St,Zi.firstDayOfYear=Yt,Zi.firstDayOfWeek=Dt,Zi.weekdays=Pt,Zi.weekdaysMin=Rt,Zi.weekdaysShort=Wt,Zi.weekdaysParse=Lt,Zi.weekdaysRegex=Gt,Zi.weekdaysShortRegex=At,Zi.weekdaysMinRegex=jt,Zi.isPM=Zt,Zi.meridiem=$t,Kt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=k("moment.lang is deprecated. Use moment.locale instead.",Kt),t.langData=k("moment.langData is deprecated. Use moment.localeData instead.",te);var $i=Math.abs,Bi=ss("ms"),qi=ss("s"),Ji=ss("m"),Ki=ss("h"),Qi=ss("d"),Xi=ss("w"),tr=ss("M"),er=ss("y"),nr=rs("milliseconds"),sr=rs("seconds"),ir=rs("minutes"),rr=rs("hours"),ar=rs("days"),or=rs("months"),ur=rs("years"),dr=Math.round,lr={s:45,m:45,h:22,d:26,M:11},hr=Math.abs,cr=Me.prototype;cr.abs=$n,cr.add=qn,cr.subtract=Jn,cr.as=es,cr.asMilliseconds=Bi,cr.asSeconds=qi,cr.asMinutes=Ji,cr.asHours=Ki,cr.asDays=Qi,cr.asWeeks=Xi,cr.asMonths=tr,cr.asYears=er,cr.valueOf=ns,cr._bubble=Qn,cr.get=is,cr.milliseconds=nr,cr.seconds=sr,cr.minutes=ir,cr.hours=rr,cr.days=ar,cr.weeks=as,cr.months=or,cr.years=ur,cr.humanize=hs,cr.toISOString=cs,cr.toString=cs,cr.toJSON=cs,cr.locale=ln,cr.localeData=hn,cr.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cs),cr.lang=Gi,z("X",0,0,"unix"),z("x",0,0,"valueOf"),J("x",Is),J("X",$s),tt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),tt("x",function(t,e,n){n._d=new Date(v(t))}),t.version="2.15.1",e(ge),t.fn=zi,t.min=ve,t.max=we,t.now=Ri,t.utc=d,t.unix=Fn,t.months=En,t.isDate=r,t.locale=Kt,t.invalid=f,t.duration=Ae,t.isMoment=g,t.weekdays=In,t.parseZone=Hn,t.localeData=te,t.isDuration=ke,t.monthsShort=Nn,t.weekdaysMin=Zn,t.defineLocale=Qt,t.updateLocale=Xt,t.locales=ee,t.weekdaysShort=zn,t.normalizeUnits=U,t.relativeTimeRounding=ds,t.relativeTimeThreshold=ls,t.calendarFormat=ze,t.prototype=zi;var fr=t;return fr});var width=470,height=580,tooltip=d3.select("body").append("div").attr("class","tooltip"),svg=d3.select("#chart").append("svg").attr("width",width).attr("height",height).attr("class","map"),projection=d3.geoMercator().center([-74.94,40.002]).scale(8e4),path=d3.geoPath().projection(projection);queue().defer(d3.json,"data/census_tracts.json").defer(d3.csv,"https://data.phila.gov/resource/st4m-d4h3.csv?$select=censustract,count(censustract)&$group=censustract&$order=censustract&licensestatus=Active&revenuecode=3202&$$app_token=8nwKL3zJBeBIdPKTZzwuKspfh").await(ready);var margin={top:20,right:20,bottom:70,left:40},width=600-margin.left-margin.right,height=300-margin.top-margin.bottom,x=d3.scaleBand().rangeRound([0,width],.05).padding(.1),y=d3.scaleLinear().range([height,0]),xAxis=d3.axisBottom().scale(x),yAxis=d3.axisLeft().scale(y).ticks(10),svgBar=d3.select("#bar-chart").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");d3.csv("https://data.phila.gov/resource/st4m-d4h3.csv?$select=issuedate,censustract&$where=issuedate>%272016-01-01T00:00:00.000%27&licensestatus=Active&revenuecode=3202&$order=issuedate&$$app_token=8nwKL3zJBeBIdPKTZzwuKspfh",function(t,e){if(t)throw t;e.forEach(function(t){t.censustract=+t.censustract,t.issuedate=moment(t.issuedate),t.expirationdate=moment(t.expirationdate)});var n=d3.nest().key(function(t){return t.issuedate.month()}).rollup(function(t){return t.length}).entries(e);x.domain(n.map(function(t){return t.key})),y.domain([0,d3.max(n,function(t){return t.value})]),svgBar.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy","-.55em").attr("transform","rotate(-90)"),svgBar.append("g").attr("class","y axis").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Value"),svgBar.selectAll("bar").data(n).enter().append("rect").style("fill","#C0C0C0").attr("x",function(t){return x(t.key)}).attr("width",x.bandwidth()).attr("y",function(t){return y(t.value)}).attr("height",function(t){return height-y(t.value)}),svgBar.append("text").attr("x",width/2).attr("y",260).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Housing Inspection Applications by Month for 2016")});